<div  class="easyui-accordion xy-west" data-options="fit:true,border:false" style="overflow-y: scroll;">

    <nav class="navbar-default navbar-static-side" role="navigation">
        <div class="sidebar-collapse">
            <ul class="nav metismenu" id="side-menu">

            </ul>

        </div>
    </nav>

</div>

<style>
    ::-webkit-scrollbar{width:14px;}
    ::-webkit-scrollbar-track{background-color: #2978b3;}
    ::-webkit-scrollbar-thumb{background-color: #00aff0;}
    ::-webkit-scrollbar-thumb:hover {background-color: #48b2f0
    }
    ::-webkit-scrollbar-thumb:active {background-color:#00aff0}


    .nav-label {
        padding-left: 26px;
    }

    .nav-label01 {
        background: url("../../images/cheliangjiankong.png") no-repeat left center;
        background-size: contain;
    }
    .nav-label02 {
        background: url("../../images/anquanguanli.png") no-repeat left center;
        background-size: contain;
    }
    .nav-label03 {
        background: url("../../images/shouhoufuwu.png") no-repeat left center;
        background-size: contain;
    }
    .nav-label04 {
        background: url("../../images/tongjifenxi.png") no-repeat left center;
        background-size: contain;
    }
    .nav-label05 {
        background: url("../../images/cheliangguanli.png") no-repeat left center;
        background-size: contain;
    }
    .nav-label06 {
        background: url("../../images/lingpeijianguanli.png") no-repeat left center;
        background-size: contain;
    }
    .nav-label07 {
        background: url("../../images/yonghuzhongxin.png") no-repeat left center;
        background-size: contain;
    }
    .nav-label08{
        background: url("../../images/kehuguanli.png") no-repeat left center;
        background-size: contain;
    }
    .nav-label09 {
        background: url("../../images/pingtaikaifangshezhi.png") no-repeat left center;
        background-size: contain;
    }
    .nav-label10 {
        background: url("../../images/xitongguanli.png") no-repeat left center;
        background-size: contain;
    }
    .nav-label11 {
        background: url("../../images/yuanchengkongzhi.png") no-repeat left center;
        background-size: contain;
    }
    .nav-label12 {
        background: url("../../images/yuanchengshengji.png") no-repeat left center;
        background-size: contain;
    }
    .nav-label13 {
        background: url("../../images/huishouzhan.png") no-repeat left center;
        background-size: contain;
    }
    .nav-label14 {
        background: url("../../images/beiyong-beifen.png") no-repeat left center;
        background-size: contain;
    }
    .nav-label15 {
        background: url("../../images/guzhangbaojing-hui.png") no-repeat left center;
        background-size: contain;
    }
    .nav-label16 {
        background: url("../../images/jiankongzhongxin-hui.png") no-repeat left center;
        background-size: contain;
    }
    .nav-label17 {
        background: url("../../images/shujuguanli-hui.png") no-repeat left center;
        background-size: contain;
    }
    .nav-label18 {
        background: url("../../images/shujujiaohuan-hui.png") no-repeat left center;
        background-size: contain;
    }
    .nav-label19 {
        background: url("../../images/dapingzhanshi_hui.png") no-repeat left center;
        background-size: contain;
    }
    .nav-label20 {
        background: url("../../images/appweihuzhongxin.png") no-repeat left center;
        background-size: contain;
    }

    .active .nav-label01 {
        background: url("../../images/cheliangjiankong_h.png") no-repeat left center;
        background-size: contain;
    }
    .active .nav-label02 {
        background: url("../../images/anquanguanli_h.png") no-repeat left center;
        background-size: contain;
    }
    .active .nav-label03 {
        background: url("../../images/shouhoufuwu_h.png") no-repeat left center;
        background-size: contain;
    }
    .active .nav-label04 {
        background: url("../../images/tongjifenxi_h.png") no-repeat left center;
        background-size: contain;
    }
    .active .nav-label05 {
        background: url("../../images/cheliangguanli_h.png") no-repeat left center;
        background-size: contain;
    }
    .active .nav-label06 {
        background: url("../../images/lingpeijianguanli_h.png") no-repeat left center;
        background-size: contain;
    }
    .active .nav-label07 {
        background: url("../../images/yonghuzhongxin_h.png") no-repeat left center;
        background-size: contain;
    }
    .active .nav-label08{
        background: url("../../images/kehuguanli_h.png") no-repeat left center;
        background-size: contain;
    }
    .active .nav-label09 {
        background: url("../../images/pingtaikaifangshezhi_h.png") no-repeat left center;
        background-size: contain;
    }
    .active .nav-label10 {
        background: url("../../images/xitongguanli_h.png") no-repeat left center;
        background-size: contain;
    }
    .active .nav-label11 {
        background: url("../../images/yuanchengkongzhi_h.png") no-repeat left center;
        background-size: contain;
    }
    .active .nav-label12 {
        background: url("../../images/yuanchengshengji_h.png") no-repeat left center;
        background-size: contain;
    }
    .active .nav-label13 {
        background: url("../../images/huishouzhan_h.png") no-repeat left center;
        background-size: contain;
    }
    .active .nav-label14 {
        background: url("../../images/beiyong-lan.png") no-repeat left center;
        background-size: contain;
    }
    .active .nav-label15 {
        background: url("../../images/guzhangbaojing-lan.png") no-repeat left center;
        background-size: contain;
    }
    .active .nav-label16 {
        background: url("../../images/jiankongzhongxin-lan.png") no-repeat left center;
        background-size: contain;
    }
    .active .nav-label17 {
        background: url("../../images/shujujiaohuan-an.png") no-repeat left center;
        background-size: contain;
    }
    .active .nav-label18 {
        background: url("../../images/shujujiaohuan-lan.png") no-repeat left center;
        background-size: contain;
    }
    .active .nav-label19 {
        background: url("../../images/dapingzhanshi_lan.png") no-repeat left center;
        background-size: contain;
    }

    .navbar-static-side{
        width: 206px;
    }
    .sidebar-collapse, .sidebar-collapse * {
        box-sizing: border-box;
    }
    .nav {
        padding-left: 0;
        margin-bottom: 0;
        list-style: none;
    }
    .nav:before {
        display: table;
        content: " ";
    }
    .nav>li {
        position: relative;
        display: block;
    }
    .nav > li > a {
        color: #c4cddc;
        font-weight: 500;
        padding: 14px 20px 14px 25px;
        transition: .4s all ease;
    }
    .nav > li > a:hover {
        color: #fff;
    }
    .nav>li>a {
        position: relative;
        display: block;
        padding: 12px 15px;
    }
    .active .nav-label {
        color: #2ee0ff;
    }
    ul.nav-second-level li.active>a {
        color: #2ee0ff;
    }
    .nav.nav-second-level.collapse[style] {
        height: auto !important;
    }

    .metismenu .collapse {
        display: none;
    }
    .nav.nav-second-level > li.active {
        border: none;
    }
    .nav > li.active {
        border-left: 4px solid #00adff;
        background: #0d356a;
    }
    .nav-second-level li, .nav-third-level li {
        border-bottom: none !important;
    }
    .nav > li.active > a {
        color: #ffffff;
    }
    .nav-second-level li a {
        padding: 8px 10px 8px 10px;
        padding-left: 42px;
    }
    .nav-third-level li a {
        padding-left: 56px;
    }
    .metismenu .arrow {
        float: right;
        line-height: 1.42857;
    }
    .metismenu .collapse.in {
        display: block;
    }
    .metismenu .collapsing {
        position: relative;
        height: 0;
        overflow: hidden;
        -webkit-transition-timing-function: ease;
        transition-timing-function: ease;
        -webkit-transition-duration: .35s;
        transition-duration: .35s;
        -webkit-transition-property: height, visibility;
        transition-property: height, visibility;
    }

    .metismenu .active > a > .fa.arrow:before {
        content: "\f107";
    }

    .active > a > .fa.arrow:before {
        content: "\f107";
    }

    .metismenu .fa.arrow:before {
        content: "\f104";
    }

    .fa.arrow:before {
        content: "\f104";
    }

    .nav-second-level li:last-child {
        margin-bottom: 10px;
    }

    .navbar-static-side a {
        text-decoration: none;
    }

    #indexLayout>.layout-panel-west .panel-header-noborder {
        height: 30px;
    }
    #indexLayout>.layout-panel-west .panel-title {
        line-height: 30px;
    }
    #centerTabs>.tabs-header-noborder {
        height: 40px;
    }
    #centerTabs>.tabs-header-noborder .tabs {
        padding-top: 7px;
        padding-left: 14px;
    }
    @media screen and (max-width:1366px) {
        .nav>li>a {

            padding: 8px 15px;
        }
        .nav-second-level li a {
            padding: 4px 10px 4px 10px;
            padding-left: 42px;
        }
        .nav-third-level li a {
            padding-left: 56px;
        }
    }
</style>
<script>
    $(function(){
//        var h = $(window).height();
//        $("#LeftTree").height(h-130);
//        $(document).resize(function() {
//            h = $(window).height();
//            $("#LeftTree").height(h-130);
//        });
//        $(".easyui-tree").tree({
//            onClick:function(node){
//                var anode = $(node.text);
//                eval(anode.attr("onclick"));
//            },
//            onLoadSuccess:function(node, data){
//
//                for(i=0;i<data.length;i++){
//                    var tree_id = data[i].domId;
//                    var anode = $(data[i].text);
//                    $("#"+tree_id+" .tree-icon").addClass(anode.attr("iconCls"));
//                }
//
//            }
//        });
    <#--var treeData = str2obj('${root}');-->
        /*$("#LeftTree").tree({
            data:treeData['children'],
            onClick: function(node){
                if(node.openType == '2'){//弹出新页面
                    window.top.open(node.attributes.url,"_blank");
                }else{
                    //判断点击的节点是否是子节点是子节点就添加tab,否则就return打开这个节点
                    addTabFun(node.text,node.attributes.url,'m_'+node.attributes.divs);
                }
            },
            onDblClick: function(node) {
                $(this).tree(node.state === 'closed' ? 'expand' : 'collapse', node.target);
                node.state = node.state === 'closed' ? 'open' : 'closed';
            },
            onLoadSuccess:function(node, data){
                for(var i=0;i<data.length;i++){
                    checkChildren(data[i]);
                }
            }
        });*/
    });

    function checkChildren(node){
        var children=node.children;
        if(children.length==0){
            /*var text=node.text;
            /*var v1=$("span[class='tree-title']:contains("+text+")");
            var v2=v1.prev().prev();
            console.log(v2);
            v2.removeClass("tree-hit tree-collapsed");
            v2.addClass("tree-indent");*/
            var id=node.id;
            var node = $('#LeftTree').tree('find', id);
            var v1=$(node.target);
            var v2=v1.attr("id");
            var v3=$("#"+v2).children("span");
            v3.each(function(){
                if(($(this).attr("class"))=="tree-hit tree-collapsed"){
                    $(this).removeClass("tree-hit tree-collapsed");
                    $(this).addClass("tree-indent");
                }
            });
        }else{
            for(var i=0;i<children.length;i++){
                checkChildren(children[i]);
            }
        }
    }
</script>
<script>
    // 创建新的nav
    var treeData = str2obj('${root}');
    var treeArr = treeData.children;
    initNav(treeArr);
    function initNav(arr) {
        var arr = arr || [];
        var oParent = $('#side-menu');
        // nav-label01
        var oIconJson = {
            "cheliangjiankong": 'nav-label01',
            "anquanguanli": 'nav-label02',
            "shouhoufuwu": 'nav-label03',
            "tongjifenxi": 'nav-label04',
            "cheliangguanli": 'nav-label05',
            "lingpeijianguanli": 'nav-label06',
            "yonghuzhongxin": 'nav-label07',
            "kehuguanli": 'nav-label08',
            "pingtaikaifangshezhi": 'nav-label09',
            "xitongguanli": 'nav-label10',
            "yuanchengkongzhi": 'nav-label11',
            "yuanchengshengji": 'nav-label12',
            "huishouzhan": 'nav-label13',
            "beiyong-beifen": 'nav-label14',
            "guzhangbaojing-hui": 'nav-label15',
            "jiankongzhongxin-hui": 'nav-label16',
            "shujuguanli-hui": 'nav-label17',
            "shujujiaohuan-hui": 'nav-label18',
            "dapingzhanshi": 'nav-label19',
            "appweihuzhongxin": 'nav-label20',
        };
        arr.forEach(function (t) {

            var oFirstLi = $('<li></li>');
            var oFirstName = $('<a href="#"> <span class="nav-label '+ oIconJson[t.iconCls] +'">'+ t.name +'</span> <span class="fa arrow"></span></a>');
            if(t.iconCls === 'dapingzhanshi'){
                oFirstName = $('<a href="'+ t.attributes.url +'" target="_blank"> <span class="nav-label '+ oIconJson[t.iconCls] +'">'+ t.name +'</span></a>');
            }
            oFirstLi.append(oFirstName);
            if(t.children.length){
                var oFirstUl = $('<ul class="nav nav-second-level"></ul>');
                t.children.forEach(function (t2) {
                    var oSecondLi = $('<li></li>');
                    if(t2.children.length){
                        var oSecondName = $('<a href="#">'+ t2.name +'<span class="fa arrow"></span></a>');
                        var oSecondUl = $('<ul class="nav nav-third-level"></ul>');
                        t2.children.forEach(function (t3) {
                            var oThirdLi = $('<li><a href="index.html#">'+ t3.name +'</a></li>');
                            oSecondUl.append(oThirdLi);
                            oThirdLi.on('click', function () {
                                var u3 = t3.attributes.url;
                                var ctx = t3.attributes.ctx;
                                if(ctx != undefined && ctx!=""){
                                    u3 = "/"+ctx+"/"+u3;
                                }
                                if(t3.openType == '2') {//弹出新页面
                                    window.top.open(u3, "_blank");
                                }else{
                                    addTabFun(t3.name, u3, 'm_'+t3.attributes.divs);
                                }

                            });
                        });
                        oSecondLi.append(oSecondName);
                        oSecondLi.append(oSecondUl);
                        oFirstUl.append(oSecondLi);
                    }else{
                        var oSecondName = $('<a href="#">'+ t2.name +'</a>');
                        oSecondLi.append(oSecondName);
                        oFirstUl.append(oSecondLi);
                        if(t2.attributes.url){
                            oSecondLi.on('click', function () {
                                var u2 = t2.attributes.url;
                                var ctx = t2.attributes.ctx;
                                if(ctx != undefined && ctx!=""){
                                    u2 = "/"+ctx+"/"+u2;
                                }

                                addTabFun(t2.name, u2, 'm_'+t2.attributes.divs);
                            });
                        }
                    }
                });
                oFirstLi.append(oFirstUl);
            }
            oParent.append(oFirstLi);
        });
    }
</script>

<script src="../../skin/js/jquery.metisMenu.js"></script>
<script src="../../skin/js/jquery.slimscroll.min.js"></script>
<script src="../../skin/js/inspinia.js"></script>
<script src="../../skin/js/pace.min.js"></script>
